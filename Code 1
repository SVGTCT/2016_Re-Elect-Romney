campaignTrail_temp.global_parameter_json = [
    {
        "model": "campaign_trail.global_parameter",
        "pk": 1,
        "fields": {
            "vote_variable": 1.125,
            "max_swing": 0.12,
            "start_point": 0.94,
            "candidate_issue_weight": 10,
            "running_mate_issue_weight": 3,
            "issue_stance_1_max": -0.71,
            "issue_stance_2_max": -0.3,
            "issue_stance_3_max": -0.125,
            "issue_stance_4_max": 0.125,
            "issue_stance_5_max": 0.3,
            "issue_stance_6_max": 0.71,
            "global_variance": 0.01,
            "state_variance": 0.005,
            "question_count": 27,
            "default_map_color_hex": "#C9C9C9",
            "no_state_map_color_hex": "#999999"
        }
    }
]

campaignTrail_temp.election_json = [
    {
        "model": "campaign_trail.election",
        "pk": 20,
        "fields": {
            "year": 2016,
            "display_year": "2016: Re-Elect Romney",
            "summary": "In 2012, Former Governor of Massachusetts Mitt Romney defied the odds to beat Barack Obama and become the 45th (and first Mormon) President of the United States. Riding on a wave of discontent with the administration, he entered the White House with a (albeit slimmed down) majority in Congress, but his job was going to be far from easy. 4 years on, that's clear to be seen.<br><br>The moderate conservative incumbent will have to defend his record and prove that America is better off under him than it was under Obama ─ that it was the right choice to say no to universal healthcare, that it paid off to be well engaged in foreign affairs ─ to be a \"foreign policy president\", that increasing taxes and spending after promising the opposite was necessary. But with former Vice-President Joe Biden his likely opponent, a difficult race lies ahead ─ can Mitt pull off re-election, or will the United States have two consecutive one-term presidents?",
            "image_url": "https://i.postimg.cc/MHgDf0j2/Romney.jpg",
            "winning_electoral_vote_number": 270,
            "advisor_url": "https://i.postimg.cc/15NMhdL9/Advisors.png",
            "recommended_reading": "",
            "has_visits": 1,
            "no_electoral_majority_image": "https://i.postimg.cc/1zG9dnGw/TELEMMGLPICT000349432906-16950297990150-trans-Nv-BQz-QNjv4-Bq-A7-N2-Cxn-JWn-YI3t-Cb-VBgu9f4-Xpit-DMGvdp2n7-FDd82.jpg"
        }
    }
]

campaignTrail_temp.temp_election_list = [
    {
        "id": 20,
        "year": 2016,
        "is_premium": 0,
        "display_year": "2016: Re-Elect Romney"
    }
]

campaignTrail_temp.credits = "/u/vordaze"

campaignTrail_temp.candidate_json = [
    {
        "model": "campaign_trail.candidate",
        "pk": 301,
        "fields": {
            "first_name": "Mitt",
            "last_name": "Romney",
            "election": 20,
            "party": "Republican",
            "state": "Massachusetts",
            "priority": 1,
            "description": "<p>With a background in business as BainCapital CEO and public office as the Governor of Massachusetts, Mitt Romney was chosen as the 2012 Republican presidential nominee. A moderate, he found his more conservative side, advocating for spending cuts to reduce the deficit, tax cuts, and gradually raising the Social Security and Medicare eligibility aid, as well as repealing Obamacare ─ all while keeping a middle-of-the-road image and satisfying Republicans.</p><p>Romney defied the odds and beat the sitting president, becoming America's 45th and first Mormon President. While he seemed like the perfect fit for an angered country, his years in office have left a lot to look for. Under his focus on foreign policy, taxes and government spending went up. The United States now finds itself involved in countless wars, and, frankly, many Americans are wondering: what's the point? The battle for re-election is an uphill one.</p>",
            "color_hex": "#d93f3f",
            "secondary_color_hex": null,
            "is_active": 1,
            "image_url": "https://upload.wikimedia.org/wikipedia/commons/9/94/Mitt_Romney_in_2015.jpg",
            "electoral_victory_message": "<h3>Romney Re-Elected</h3><p>Mission accomplished. It's time for four more years. Well done, Mr. President, it wasn't easy but you did it. You've managed to keep your</p>",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "<h3>Chaos and Carnage</h3><p><i>Si vis pace, para bellum.</i> Those were the words that came to Romney's mind as he saw the election results. Only now he wasn't referring to the countless American foreign interventions. The war that was about to be waged by the Republican Party was on the home front, and it was a fight for the country itself.</p><p>Romney knew he had the backing of the majority of states. He was unphased, in fact, as the voting began. The results were predictable ─ the election was his, stolen from Biden, the winner of the popular vote. He would take on one hell of a challenge: to run an administration doomed from the start.</p><p>Though he might have thought he had safeguarded the nation from socialists like Bernie Sanders, the President was in for a surprise in 2020. But now, in 2024, he had hope. He trusted the rising star conservative from Louisiana, Mike Johnson, to beat Vice-President Ryan as President Sanders dropped out.</p>",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 309,
        "fields": {
            "first_name": "Paul",
            "last_name": "Ryan",
            "election": 20,
            "party": "Republican",
            "state": "Wisconsin",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#d93f3f",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://i.postimg.cc/nhWVmG3F/Paul-Ryan.jpg",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": "<p>Ryan was Romney's running mate in 2012 and is his Vice-President. He was known for his work on the federal budget, appealing to reduce the deficit ─ a true neoliberal and conservative. Says no to every tax you could imagine, from capital gains to estate tax. Against universal healthcare and in favour of privatising everything the government still touches, including Medicaid and Social Security. A supply-side economics guy. Also the second consecutive Catholic Vice-President.</p><p>There's not much to it, Ryan is a (potentially objectivist) conservative with a focus on fiscal policy. Really, for most countries, he's quite radical. But this is the United States, so he appeals to moderates. But all of that he stood for, he had four years to do it, and what do you know: higher taxes, more spending. Maybe Romney should just go with a moderate this time ─ if those darn populists weren't unhappy with Ryan enough.</p>",
            "candidate_score": 1,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 300,
        "fields": {
            "first_name": "Joe",
            "last_name": "Biden",
            "election": 20,
            "party": "Democratic",
            "state": "Delaware",
            "priority": 1,
            "description": "<p><b>Not playable</b></p><p>Yeah, sorry, I'm lazy.</p>",
            "color_hex": "#3f63d9",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "",
            "electoral_victory_message": "<h3>Nice try, Redditor</h3><p>Why don't you log back onto the TCT subreddit and find a mod with third-party endings? Or actually try and play this one by clicking on the play again button?</p><p>Anyway, you playing this mod is very much appreciated. Thanks!</p>",
            "electoral_loss_message": "<h3>Nice try, Redditor</h3><p>Why don't you log back onto the TCT subreddit and find a mod with third-party endings? Or actually try and play this one by clicking on the play again button?</p><p>Anyway, you playing this mod is very much appreciated. Thanks!</p>",
            "no_electoral_majority_message": "<h3>Nice try, Redditor</h3><p>Why don't you log back onto the TCT subreddit and find a mod with third-party endings? Or actually try and play this one by clicking on the play again button?</p><p>Anyway, you playing this mod is very much appreciated. Thanks!</p>",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 303,
        "fields": {
            "first_name": "",
            "last_name": "Jill Stein/Others",
            "election": 20,
            "party": "Others",
            "state": "Nationwide",
            "priority": 1,
            "description": "<p><b>Not playable</b></p>",
            "color_hex": "#ffff00",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "",
            "electoral_victory_message": "<h3>Nice try, Redditor</h3><p>Why don't you log back onto the TCT subreddit and find a mod with third-party endings? Or actually try and play this one by clicking on the play again button?</p><p>Anyway, you playing this mod is very much appreciated. Thanks!</p>",
            "electoral_loss_message": "<h3>Nice try, Redditor</h3><p>Why don't you log back onto the TCT subreddit and find a mod with third-party endings? Or actually try and play this one by clicking on the play again button?</p><p>Anyway, you playing this mod is very much appreciated. Thanks!</p>",
            "no_electoral_majority_message": "<h3>Nice try, Redditor</h3><p>Why don't you log back onto the TCT subreddit and find a mod with third-party endings? Or actually try and play this one by clicking on the play again button?</p><p>Anyway, you playing this mod is very much appreciated. Thanks!</p>",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 123786,
        "fields": {
            "first_name": "Bernie",
            "last_name": "Sanders (Write-In)",
            "election": 20,
            "party": "Independent/Democratic",
            "state": "Vermont",
            "priority": 1,
            "description": "<p><b>Not playable</b></p>",
            "color_hex": "#0c9215",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "",
            "electoral_victory_message": "<h3>Nice try, Redditor</h3><p>Why don't you log back onto the TCT subreddit and find a mod with third-party endings? Or actually try and play this one by clicking on the play again button?</p><p>Anyway, you playing this mod is very much appreciated. Thanks!</p>",
            "electoral_loss_message": "<h3>Nice try, Redditor</h3><p>Why don't you log back onto the TCT subreddit and find a mod with third-party endings? Or actually try and play this one by clicking on the play again button?</p><p>Anyway, you playing this mod is very much appreciated. Thanks!</p>",
            "no_electoral_majority_message": "<h3>Nice try, Redditor</h3><p>Why don't you log back onto the TCT subreddit and find a mod with third-party endings? Or actually try and play this one by clicking on the play again button?</p><p>Anyway, you playing this mod is very much appreciated. Thanks!</p>",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    }
]

campaignTrail_temp.running_mate_json = [
    {
        "model": "campaign_trail.running_mate",
        "pk": 123802,
        "fields": {
            "candidate": 301,
            "running_mate": 309
        }
    }
]

campaignTrail_temp.opponents_default_json = [
    {
        "election": 20,
        "candidates": [
            301,
            300,
            303,
            123786
        ]
    }
]

campaignTrail_temp.opponents_weighted_json = [
    {
        "election": 20,
        "candidates": [
            301,
            300,
            303,
            123786
        ]
    }
]

jet_data = {
    "headerColor": "#d94f3f",
    "windowColor": "#0d0359",
    "containerColor": "#ffa3a3",
    "innerWindowColor": "#ffebeb",
    "bannerImageUrl": "https://i.postimg.cc/N0yb9X7m/Banners.png",
    "backgroundImageUrl": "https://upload.wikimedia.org/wikipedia/commons/4/49/Us_troops_in_syria.jpg",
    "endingTextColor": "#ffffff",
    "customQuote": "\"When it comes to pinning blame, pin the tail on the donkeys.\" ─ Mitt Romney",
    "gameTitle": "Re-Elect_Romney"
}

//#startcode


corrr = '\n              <h2>THE RE-ELECTION TRAIL</h2><font id="wittyquote" size="4" color="white"><em>"When it comes to pinning blame, pin the tail on the donkeys." ─ Mitt Romney</em></font>\n            ';


nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#d94f3f";

nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#0d0359";

document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

$("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;

$(".container")[0].style.backgroundColor = "#ffa3a3";

document.getElementById("header").src = "https://i.postimg.cc/N0yb9X7m/Banners.png";

document.body.background = "https://upload.wikimedia.org/wikipedia/commons/4/49/Us_troops_in_syria.jpg";

document.head.innerHTML += "<style>#results_container {color:#ffffff;} .inner_window_w_desc {background-color:#ffebeb!important;}</style>";

//#endcode

// Initialise custom music

$("#music_player")[0].children[0].style.display="none"
$("#music_player")[0].children[1].style.display="none"

document.getElementById("modLoadReveal").style.display="none"
document.getElementById("modloaddiv").style.display="none"

musicBox = document.getElementById("music_player")
musicBox.style.display=""

var trackSel;
e = campaignTrail_temp
e.selectedSoundtrack = 0

toTime = (seconds) => {
  var date = new Date(null);
  date.setSeconds(seconds);
  return date.toISOString().substr(11, 8);
}

generateTime = () => {
    // Get the audio element
    var audio = document.getElementById("campaigntrailmusic");

    timeTracker = document.createElement("div");
    timeTracker.style = `
      text-align:left;
      border-style:solid;
      border-width:3px;
      height:150px;
      width:200px;
      background-color:#999999;
      float:right;
      padding: 10px;
    `
    $("#trackSelParent")[0].prepend(timeTracker);
    $("#trackSelParent")[0].prepend(document.createElement("br"));

    // Create a new element to display the current position of the audio
    var positionDisplay = document.createElement("gg");
    positionDisplay.id = "position-display";

    // Create a new slider element to change the time
    var timeSlider = document.createElement("input");
    timeSlider.type = "range";
    timeSlider.min = 0;
    timeSlider.max = 1;
    timeSlider.step = 0.001;
    timeSlider.value = 0;
    timeSlider.style.width = "200px";
    timeSlider.id = "time-slider";

    var pausePlay = document.createElement("button");
    pausePlay.id = "position-display";
    pausePlay.innerHTML = "<b>Pause</b>"
    pausePlay.style.width = "100%";


    pausePlay.addEventListener("click", event => {
      event.preventDefault();
      updatePositionDisplay();
      let audio = document.getElementById("campaigntrailmusic");
      if (audio.paused) {
        audio.play();
        event.target.innerHTML = "<b>Pause</b>";
        return;
      }
      audio.pause();
      event.target.innerHTML = "<b>Play</b>";
      return;
    })

    var volumeLabel = document.createElement("gg");
    volumeLabel.id = "volume-label";
    volumeLabel.innerHTML = "<br><b>Volume: </b>"

    var volumeSlider = document.createElement("input");
    volumeSlider.type = "range";
    volumeSlider.min = 0;
    volumeSlider.max = 1;
    volumeSlider.step = 0.001;
    volumeSlider.value = 0;
    volumeSlider.style.width = "200px";
    volumeSlider.id = "volume-slider";

    volumeSlider.value = audio.volume;

    timeTracker.appendChild(pausePlay);
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(positionDisplay);
    timeTracker.appendChild(timeSlider);
    timeTracker.appendChild(volumeLabel);
    timeTracker.appendChild(volumeSlider);

    updatePositionDisplay();

    //for (let i = 0; i < 10; i++)
    //timeTracker.append(document.createElement("br"));


    // Function to update the position display
    function updatePositionDisplay() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      timeSlider.value = audio.duration ? audio.currentTime / audio.duration : 0;
    }

    // Function to change the time of the audio
    function changeTime() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      audio.currentTime = timeSlider.value * audio.duration;
    }

    updateVolume = event => {
      audio.volume = event.target.value;
    }
    
    // Update the position display and slider every second
    setInterval(updatePositionDisplay, 1000);

    // Listen for changes to the time slider and change the time of the audio
    timeSlider.addEventListener("input", changeTime);
    volumeSlider.addEventListener("input", updateVolume)
}

function newMusicPlayer() {
  trackSel = document.createElement("div");
  trackSel.id = "trackSelParent"
  let z = `<br><br><br><br><br><br><br><br><br><br><div id='trackSel' style="text-align:left;border-style:solid;border-width:3px;overflow-y: scroll;overflow-x: hidden;height:200px; width:400px;background-color:#999999;float:right;">`
  z += `<b><select id='selectSoundtrack'><option value='`+soundtracks[e.selectedSoundtrack].name+`'>`+soundtracks[e.selectedSoundtrack].name+"</option>"
  for (i in soundtracks) {
    if (soundtracks[e.selectedSoundtrack] != soundtracks[i]) {
      z += `<option value='`+soundtracks[i].name+`'>`+soundtracks[i].name+`</option>`
    }
  }
  z += `</select></b><br><br>`
  // <label><input type="radio" name="option" value="option1">Option 1</label><br>
  for (i in soundtracks[e.selectedSoundtrack].tracklist) {
    let a = soundtracks[e.selectedSoundtrack].tracklist[i]
    let b = `<label><input class="trackSelector" type="radio" name="trackSelector" value="`+i+`">`+a.name+`</label><br>`
    z += b
  }
  z += "</div><br><br>"
  trackSel.innerHTML = z

  // select correct song

  musicBox.appendChild(trackSel);
  Array.from(document.getElementById("trackSel").children).filter(f=>{
    return f.tagName == "LABEL"
  }).map(f=>f.children[0])[0].checked = true

  // set soundtrack changer

  soundtrackSelector = document.getElementById("selectSoundtrack")
  soundtrackSelector.onchange = function() {
    for (i in soundtracks) {
      if (soundtracks[i].name == soundtrackSelector.value) {
        e.selectedSoundtrack = i
        break
      }
    }
    document.getElementById("trackSelParent").remove()
    newMusicPlayer()
  }

  var matches = document.querySelectorAll('.trackSelector');

  for (match in matches) {
    matches[match].onchange = function() {
      audio = $("#campaigntrailmusic")[0];
      audio.src = soundtracks[e.selectedSoundtrack].tracklist[this.value].url
      audio.currentTime = 0
    }
  }

  musicBox.children[2].loop = false
  musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[0].url

  musicBox.children[2].onended = function() {
    console.log("next track")
    let selected = Number(document.querySelector('input[name="trackSelector"]:checked').value);
    let newSel = clamp(selected+1, soundtracks[e.selectedSoundtrack].tracklist.length-1, 0)
    let buttons = Array.from(document.getElementById("trackSel").children).filter(f=>{
      return f.tagName == "LABEL"
    }).map(f=>f.children[0])
    //let selectedIndex = buttons.map(f=>f.children[0]).map(f=>f.checked)
    buttons[newSel].click()
  }

  for (w = 0; w < 7; w++) {
    document.getElementById("trackSelParent").appendChild(document.createElement("br"))
  }
  
  generateTime();
}

clamp = function(a, max, min, overflow=true) {
  if (overflow) {
    return a > max ? min : a < min ? max : a;
  }
  return a > max ? max : a < min ? min : a;
}


// Track list

var soundtracks = {
  0: {
    name: "Re-Elect Romney: The Tunes",
    tracklist: [
      {
        "name": "As Good As I Once Was - Toby Keith",
        "url": "https://audio.jukehost.co.uk/BYWAQBvCynBP6dY1ysOeABbptEgv7NzF"
      },
      {
        "name": "Songs About Me - Trace Adkins",
        "url": "https://audio.jukehost.co.uk/txC7Vp5l0lGgwvF3b9RNhQQ4bXGpaKlx"
      },
      {
        "name": "You've Got to Stand for Something - Aaron Tippin",
        "url": "https://audio.jukehost.co.uk/9rHqfZnGJ3EZPy8ond6kcv1eSQzrWWor"
      },
      {
        "name": "Save A Horse (Ride A Cowboy) - Big & Rich",
        "url": "https://audio.jukehost.co.uk/ZKp5GfKd9NRaQzxhuKFOz4R8fznvU1UH"
      },
      {
        "name": "Somethin' 'Bout A Truck - Kip Moore",
        "url": "https://audio.jukehost.co.uk/CliKEY4bFIeuxpNCA30fzDLmxZ1hQENp"
      },              
    ]
  }
}

// Set up new music player

newMusicPlayer()

RecReading=true

      

styling = document.createElement("style");
document.head.appendChild(styling);

styling.innerHTML = `
#opponent_selection_id_back {
    display: none;
}
`

let z = new MutationObserver((mutationsList, observer) => {
    let runningMateSummary = document.querySelector("#running_mate_summary");
    if (runningMateSummary) {
        $("#running_mate_id_button").click();
        observer.disconnect()
    }
});

HistHexcolour=["#3f63d9","#d93f3f","#0c9215","#ffff00"];
        HistName=[" Joe Biden/Brian Schweitzer"," Mitt Romney/Paul Ryan"," Bernie Sanders (Write-In)"," Jill Stein/Others"];
        HistEV=[413,122,3,0];
        HistPV=["77,578,050","59,410,062","111,631","839,887"];
        HistPVP=["56.2%","43.1%","0.1%","0.6%"];
